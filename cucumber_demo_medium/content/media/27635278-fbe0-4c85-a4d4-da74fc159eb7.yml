_meta:
  version: '1.0'
  entity_type: media
  uuid: 27635278-fbe0-4c85-a4d4-da74fc159eb7
  bundle: feature
  default_langcode: en
  depends:
    a6cd792a-e9f7-450e-83d6-3dc3e7e3f4f6: taxonomy_term
default:
  revision_user:
    -
      target_id: 1
  status:
    -
      value: true
  uid:
    -
      target_id: 1
  name:
    -
      value: '03-05 Check JSON API admin interface and services and Varbase API settings'
  created:
    -
      value: 1699107639
  revision_translation_affected:
    -
      value: true
  moderation_state:
    -
      value: to_do
  directory:
    -
      entity: a6cd792a-e9f7-450e-83d6-3dc3e7e3f4f6
  path:
    -
      alias: ''
      langcode: en
      pathauto: 0
  field_description:
    -
      value: "Scenario: Check the Varbase API settings in admin configurations page\r\nScenario: Check JSON:API configurations\r\nScenario: Check JSON:API Extras configurations\r\nScenario: Check JSON:API Resource overrides\r\nScenario: Check Varbase API settings and Generate keys\r\nScenario: Check Open API settings and documentation pages\r\nScenario: Upload a Media entity test for API\r\nScenario: Add a term \"space\" tag term for JSON:API to test.\r\nScenario: Check that Site Admin users can access \"View JSON\" and \"View API Docs\" entity operations\r\nScenario: Check that Content Admin users can not access \"View JSON\" and \"View API Docs\" entity operations\r\nScenario: Check that Editor users can access \"View JSON\" and \"View API Docs\" entity operations"
      format: plain_text
  field_media_gherkin:
    -
      value: "Feature: Check JSON API admin interface and services and Varbase API settings\r\nAs a site admin user\r\nI want to be able to check the JSON:API available interface options\r\nSo that I can use them to enable or disable API service for Varbase APIs.\r\n\r\n  Background:\r\n    Given I am a logged in user with the \"webmaster\" user\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check the Varbase API settings in admin configurations page\r\n     When I go to \"/admin/config\"\r\n      And wait\r\n     Then I should see \"JSON:API\"\r\n      And I should see \"Varbase API settings\"\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check JSON:API configurations\r\n     When I go to \"/admin/config/services/jsonapi\"\r\n      And wait\r\n     Then I should see \"JSON:API\"\r\n      And I should see \"Allowed operations\"\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check JSON:API Extras configurations\r\n     When I go to \"/admin/config/services/jsonapi/extras\"\r\n      And wait\r\n     Then I should see \"JSON:API Extras\"\r\n      And I should see \"api\" value in the \"edit-path-prefix\" input element\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check JSON:API Resource overrides\r\n     When I go to \"/admin/config/services/jsonapi/resource_types\"\r\n      And wait\r\n     Then I should see \"JSON:API Resource overrides\"\r\n      And I should see \"The following table shows the list of JSON:API resource types available.\"\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check Varbase API settings and Generate keys\r\n     When I go to \"/admin/config/system/varbase/api\"\r\n      And wait\r\n     Then I should see \"Varbase API settings\"\r\n      And the \"entity_json\" checkbox is checked\r\n      And the \"bundle_docs\" checkbox is checked\r\n     When I go to \"/admin/config/system/varbase/api/keys\"\r\n      And wait\r\n     Then I should see \"Path to the directory in which to store the generated keys.\"\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check Open API settings and documentation pages\r\n     When I go to \"/admin/config/services/openapi\"\r\n      And wait\r\n     Then I should see \"OpenAPI Resources\"\r\n      And I should see \"Rest\"\r\n      And I should see \"JSON:API\"\r\n\r\n  @javascript @local @development @staging @production\r\n  Scenario: Upload a Media entity test for API\r\n     Given I am a logged in user with the \"Site admin\" user\r\n      When I go to \"/media/add/image\"\r\n       And wait\r\n      Then I should see \"Allowed types: png gif jpg jpeg.\"\r\n      When I attach the file \"flag-earth.jpg\" to \"edit-field-media-image-0-upload\"\r\n       And wait\r\n       And I press the \"Save\" button\r\n       And wait\r\n       And I fill in \"Media entity test\" for \"field_media_image[0][alt]\"\r\n       And I fill in \"Media entity test\" for \"field_media_image[0][title]\"\r\n       And I fill in \"Media entity test\" for \"name[0][value]\"\r\n       And I press the \"Save\" button\r\n       And wait\r\n      Then I should see \"Media entity test\"\r\n\r\n  @javascript @local @development @staging @production\r\n  Scenario: Add a term \"space\" tag term for JSON:API to test.\r\n     Given I am a logged in user with the \"Site admin\" user\r\n      When I go to \"/admin/structure/taxonomy/manage/tags/add\"\r\n       And wait\r\n      Then I should see \"Add term\"\r\n      When I fill in \"space\" for \"Name\"\r\n       And I press the \"Save\" button\r\n       And wait\r\n       And I go to \"/admin/structure/taxonomy/manage/tags/overview\"\r\n      Then I should see \"Tags\"\r\n       And I should see \"space\"\r\n\r\n @javascript @check @local @development @staging @production\r\n  Scenario: Check that Site Admin users can access \"View JSON\" and \"View API Docs\" entity operations\r\n    Given I am a logged in user with the \"Site admin\" user\r\n     When I go to \"/admin/content\"\r\n      And wait\r\n     Then I should see \"Content\"\r\n      And I should see the \"View JSON\" operation for the \"Homepage\" content\r\n      And I should see the \"View API Docs\" operation for the \"Homepage\" content\r\n      And I should see the \"Edit\" operation for the \"Homepage\" content\r\n      And I should see the \"Layout\" operation for the \"Homepage\" content\r\n      And I should see the \"View JSON\" operation for the \"Blog\" content\r\n      And I should see the \"View API Docs\" operation for the \"Blog\" content\r\n\r\n     When I go to \"/admin/content/media\"\r\n      And wait\r\n     Then I should see \"Media\"\r\n      And I should see the \"View JSON\" operation for the \"Media entity test\" media\r\n      And I should see the \"View API Docs\" operation for the \"Media entity test\" media\r\n      And I should see the \"Edit\" operation for the \"Media entity test\" media\r\n\r\n     When I go to \"/admin/structure/taxonomy/manage/tags/overview\"\r\n      And wait\r\n     Then I should see \"Tags\"\r\n      And I should see \"space\"\r\n      And I should not see the \"View JSON\" operation for the \"space\" term\r\n      And I should not see the \"View API Docs\" operation for the \"space\" term\r\n\r\n     When I go to \"/admin/structure/entityqueue\"\r\n      And wait\r\n     Then I should see \"Entityqueues\"\r\n      And I should not see the \"View JSON\" operation for the \"Media Hero Slider\" entity\r\n      And I should not see the \"View API Docs\" operation for the \"Media Hero Slider\" entity\r\n      But I should not see the \"Edit items\" operation for the \"Media Hero Slider\" entity\r\n      \r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check that Content Admin users can not access \"View JSON\" and \"View API Docs\" entity operations\r\n    Given I am a logged in user with the \"Content admin\" user\r\n     When I go to \"/admin/content\"\r\n      And wait\r\n     Then I should see \"Content\"\r\n      And I should not see the \"View JSON\" operation for the \"Homepage\" content\r\n      And I should not see the \"View API Docs\" operation for the \"Homepage\" content\r\n      But I should see the \"Edit\" operation for the \"Homepage\" content\r\n      And I should see the \"Layout\" operation for the \"Homepage\" content\r\n\r\n     When I go to \"/admin/content/media\"\r\n      And wait\r\n     Then I should see \"Media\"\r\n      And I should not see the \"View JSON\" operation for the \"Media entity test\" media\r\n      And I should not see the \"View API Docs\" operation for the \"Media entity test\" media\r\n      But I should see the \"Edit\" operation for the \"Media entity test\" media\r\n\r\n     When I go to \"/admin/structure/taxonomy/manage/tags/overview\"\r\n      And wait\r\n     Then I should see \"Tags\"\r\n      And I should see \"space\"\r\n      And I should not see the \"View JSON\" operation for the \"space\" term\r\n      And I should not see the \"View API Docs\" operation for the \"space\" term\r\n\r\n     When I go to \"/admin/structure/entityqueue\"\r\n      And wait\r\n     Then I should see \"Entityqueues\"\r\n      And I should not see the \"View JSON\" operation for the \"Media Hero Slider\" entity\r\n      And I should not see the \"View API Docs\" operation for the \"Media Hero Slider\" entity\r\n      But I should not see the \"Edit items\" operation for the \"Media Hero Slider\" entity\r\n\r\n\r\n  @javascript @check @local @development @staging @production\r\n  Scenario: Check that Editor users can access \"View JSON\" and \"View API Docs\" entity operations\r\n    Given I am a logged in user with the \"Editor\" user\r\n     When I go to \"/admin/content\"\r\n      And wait\r\n     Then I should see \"Content\"\r\n      And I should not see the \"View JSON\" operation for the \"Homepage\" content\r\n      And I should not see the \"View API Docs\" operation for the \"Homepage\" content\r\n      But I should see the \"Edit\" operation for the \"Homepage\" content\r\n      And I should see the \"Layout\" operation for the \"Homepage\" content\r\n\r\n     When I go to \"/admin/content/media\"\r\n      And wait\r\n     Then I should see \"Media\"\r\n      And I should not see the \"View JSON\" operation for the \"Media entity test\" media\r\n      And I should not see the \"View API Docs\" operation for the \"Media entity test\" media\r\n      But I should see the \"Edit\" operation for the \"Media entity test\" media\r\n\r\n     When I go to \"/admin/structure/taxonomy/manage/tags/overview\"\r\n      And wait\r\n     Then I should see \"Tags\"\r\n      And I should see \"space\"\r\n      And I should not see the \"View JSON\" operation for the \"space\" term\r\n      And I should not see the \"View API Docs\" operation for the \"space\" term"
      format: gherkin
